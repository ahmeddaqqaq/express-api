{"openapi":"3.0.0","paths":{"/express/ping":{"get":{"operationId":"AppController_ping","parameters":[],"responses":{"200":{"description":""}},"tags":["App"]}},"/express/customer/create":{"post":{"operationId":"CustomerController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCustomerDto"}}}},"responses":{"4XX":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}},"tags":["Customer"]}},"/express/customer/findMany":{"get":{"operationId":"CustomerController_findMany","parameters":[{"name":"skip","required":false,"in":"query","schema":{"type":"number"}},{"name":"take","required":false,"in":"query","schema":{"type":"number"}},{"name":"search","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomersManyResponse"}}}}},"tags":["Customer"]}},"/express/customer/{id}":{"get":{"operationId":"CustomerController_findOne","parameters":[{"name":"id","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"4XX":{"schema":{"type":"object","properties":{"error":{"type":"string"}}},"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerResponse"}}}}},"tags":["Customer"]}},"/express/customer/update":{"patch":{"operationId":"CustomerController_update","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateCustomerDto"}}}},"responses":{"4XX":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}},"tags":["Customer"]}},"/express/customer/toggle-blacklist":{"patch":{"operationId":"CustomerController_toggleBlacklist","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ToggleBlacklistDto"}}}},"responses":{"4XX":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}},"tags":["Customer"]}},"/express/car/create":{"post":{"operationId":"CarController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCarDto"}}}},"responses":{"4XX":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}},"tags":["Car"]}},"/express/car/findMany":{"get":{"operationId":"CarController_findMany","parameters":[],"responses":{"4XX":{"schema":{"type":"object","properties":{"error":{"type":"string"}}},"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CarResponse"}}}}}},"tags":["Car"]}},"/express/car/update/{id}":{"patch":{"operationId":"CarController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCarDto"}}}},"responses":{"4XX":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}},"tags":["Car"]}},"/express/car/delete/{id}":{"delete":{"operationId":"CarController_delete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"4XX":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}},"tags":["Car"]}},"/express/brand/create":{"post":{"operationId":"BrandController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateBrandDto"}}}},"responses":{"4XX":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}},"tags":["Brand"]}},"/express/brand/findMany":{"get":{"operationId":"BrandController_findMany","parameters":[{"name":"skip","required":false,"in":"query","schema":{"type":"number"}},{"name":"take","required":false,"in":"query","schema":{"type":"number"}},{"name":"search","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BrandManyResponse"}}}}},"tags":["Brand"]}},"/express/brand/update/{id}":{"patch":{"operationId":"BrandController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateBrandDto"}}}},"responses":{"4XX":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}},"tags":["Brand"]}},"/express/brand/delete/{id}":{"delete":{"operationId":"BrandController_delete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"4XX":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}},"tags":["Brand"]}},"/express/model/create":{"post":{"operationId":"ModelController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateModelDto"}}}},"responses":{"4XX":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}},"tags":["Model"]}},"/express/model/findMany":{"get":{"operationId":"ModelController_findMany","parameters":[],"responses":{"4XX":{"schema":{"type":"object","properties":{"error":{"type":"string"}}},"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ModelResponse"}}}}}},"tags":["Model"]}},"/express/model/update/{id}":{"patch":{"operationId":"ModelController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateModelDto"}}}},"responses":{"4XX":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}},"tags":["Model"]}},"/express/model/delete/{id}":{"delete":{"operationId":"ModelController_delete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"4XX":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}},"tags":["Model"]}},"/express/transaction/create":{"post":{"operationId":"TransactionController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTransactionDto"}}}},"responses":{"201":{"description":"Transaction created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionResponse"}}}},"4XX":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}},"summary":"Create a new transaction","tags":["Transaction"]}},"/express/transaction/findMany":{"get":{"description":"Get a paginated list of transactions with optional search and date filtering. If no date is provided, returns all transactions.","operationId":"TransactionController_findMany","parameters":[{"name":"search","required":false,"in":"query","description":"Search by customer mobile number, plate number, or transaction ID","schema":{"example":"079123456","type":"string"}},{"name":"date","required":false,"in":"query","description":"Filter transactions by date (YYYY-MM-DD format). If not provided, returns all transactions.","schema":{"format":"date","example":"2024-12-31","type":"string"}},{"name":"skip","required":false,"in":"query","schema":{"type":"number"}},{"name":"take","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"Transactions retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionManyResponse"}}}},"400":{"description":"Bad request - invalid pagination or filter parameters","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"error":{"type":"string"},"statusCode":{"type":"number"}}}}}}},"summary":"Find transactions with pagination and filtering","tags":["Transaction"]}},"/express/transaction/findScheduled":{"get":{"description":"Get all transactions in scheduled status, optionally filtered by creation date","operationId":"TransactionController_findScheduled","parameters":[{"name":"date","required":false,"in":"query","description":"Date filter (YYYY-MM-DD format) to filter by creation date","schema":{"example":"2024-12-31","type":"string"}}],"responses":{"200":{"description":"Scheduled transactions retrieved successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TransactionResponse"}}}}},"400":{"description":"Bad request - invalid date format","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"error":{"type":"string"},"statusCode":{"type":"number"}}}}}}},"summary":"Find scheduled transactions","tags":["Transaction"]}},"/express/transaction/findInProgressStageOne":{"get":{"description":"Get all transactions currently in stageOne status, optionally filtered by date","operationId":"TransactionController_findStageOne","parameters":[{"name":"date","required":false,"in":"query","description":"Date filter (YYYY-MM-DD format) to filter by creation date","schema":{"example":"2024-12-31","type":"string"}}],"responses":{"200":{"description":"Stage one transactions retrieved successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TransactionResponse"}}}}},"400":{"description":"Bad request - invalid date format","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"error":{"type":"string"},"statusCode":{"type":"number"}}}}}}},"summary":"Find transactions in stage one","tags":["Transaction"]}},"/express/transaction/findInProgressStageTwo":{"get":{"description":"Get all transactions currently in stageTwo status, optionally filtered by date","operationId":"TransactionController_findStageTwo","parameters":[{"name":"date","required":false,"in":"query","description":"Date filter (YYYY-MM-DD format) to filter by creation or update date","schema":{"example":"2024-12-31","type":"string"}}],"responses":{"200":{"description":"Stage two transactions retrieved successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TransactionResponse"}}}}},"400":{"description":"Bad request - invalid date format","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"error":{"type":"string"},"statusCode":{"type":"number"}}}}}}},"summary":"Find transactions in stage two","tags":["Transaction"]}},"/express/transaction/findInProgressStageThree":{"get":{"description":"Get all transactions currently in stageThree status, optionally filtered by date","operationId":"TransactionController_findStageThree","parameters":[{"name":"date","required":false,"in":"query","description":"Date filter (YYYY-MM-DD format) to filter by creation or update date","schema":{"example":"2024-12-31","type":"string"}}],"responses":{"200":{"description":"Stage three transactions retrieved successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TransactionResponse"}}}}},"400":{"description":"Bad request - invalid date format","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"error":{"type":"string"},"statusCode":{"type":"number"}}}}}}},"summary":"Find transactions in stage three","tags":["Transaction"]}},"/express/transaction/findCompleted":{"get":{"description":"Get all completed transactions, optionally filtered by completion date","operationId":"TransactionController_findCompleted","parameters":[{"name":"date","required":false,"in":"query","description":"Date filter (YYYY-MM-DD format) to filter by completion date","schema":{"example":"2024-12-31","type":"string"}}],"responses":{"200":{"description":"Completed transactions retrieved successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TransactionResponse"}}}}},"400":{"description":"Bad request - invalid date format","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"error":{"type":"string"},"statusCode":{"type":"number"}}}}}}},"summary":"Find completed transactions","tags":["Transaction"]}},"/express/transaction/findCancelled":{"get":{"description":"Get all cancelled transactions, optionally filtered by cancellation date","operationId":"TransactionController_findCancelled","parameters":[{"name":"date","required":false,"in":"query","description":"Date filter (YYYY-MM-DD format) to filter by cancellation date","schema":{"example":"2024-12-31","type":"string"}}],"responses":{"200":{"description":"Cancelled transactions retrieved successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TransactionResponse"}}}}},"400":{"description":"Bad request - invalid date format","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"error":{"type":"string"},"statusCode":{"type":"number"}}}}}}},"summary":"Find cancelled transactions","tags":["Transaction"]}},"/express/transaction/cancel/{id}":{"patch":{"description":"Cancel a transaction that is currently in scheduled status with optional notes","operationId":"TransactionController_cancelTransaction","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CancelTransactionDto"}}}},"responses":{"200":{"description":"Transaction cancelled successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionResponse"}}}},"400":{"description":"Bad request - transaction is not in scheduled status","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"error":{"type":"string"},"statusCode":{"type":"number"}}}}}},"404":{"description":"Transaction not found","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"error":{"type":"string"},"statusCode":{"type":"number"}}}}}}},"summary":"Cancel a scheduled transaction","tags":["Transaction"]}},"/express/transaction/update":{"patch":{"operationId":"TransactionController_update","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateTransactionDto"}}}},"responses":{"200":{"description":"Transaction updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionResponse"}}}},"400":{"description":"Bad request - validation failed or invalid phase progression","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"error":{"type":"string"},"statusCode":{"type":"number"}}}}}},"404":{"description":"Transaction not found","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"error":{"type":"string"},"statusCode":{"type":"number"}}}}}}},"summary":"Update transaction status and details","tags":["Transaction"]}},"/express/transaction/edit-scheduled":{"patch":{"description":"Edit transaction details. For scheduled transactions: all fields can be edited. For other statuses: only notes, add-ons, and sales person can be edited.","operationId":"TransactionController_editScheduled","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EditScheduledTransactionDto"}}}},"responses":{"200":{"description":"Transaction edited successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionResponse"}}}},"400":{"description":"Bad request - trying to edit restricted fields for non-scheduled transaction or invalid data","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"error":{"type":"string"},"statusCode":{"type":"number"}}}}}},"404":{"description":"Transaction, service, or addon not found","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"error":{"type":"string"},"statusCode":{"type":"number"}}}}}}},"summary":"Edit transaction details","tags":["Transaction"]}},"/express/transaction/calculate-total":{"post":{"description":"Calculate total price based on service type, car type, and selected addons","operationId":"TransactionController_calculateTotal","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CalculateTotalDto"}}}},"responses":{"200":{"description":"Total calculated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"total":{"type":"number","description":"Total price including service and addons"}}}}}},"404":{"description":"Car, service, or addon not found","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"error":{"type":"string"},"statusCode":{"type":"number"}}}}}}},"summary":"Calculate total price for transaction","tags":["Transaction"]}},"/express/transaction/{id}/upload":{"patch":{"description":"Upload an image file to a transaction. Image will be tagged with current transaction status/phase.","operationId":"TransactionController_uploadImage","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"Image file upload (JPEG, PNG, etc.)","content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary","description":"Image file to upload"}},"required":["file"]}}}},"responses":{"200":{"description":"Image uploaded successfully","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string"},"status":{"type":"string"},"images":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"key":{"type":"string"},"url":{"type":"string"},"uploadedAtStage":{"type":"string"},"createdAt":{"type":"string","format":"date-time"}}}}}}}}},"400":{"description":"Bad request - invalid file type or no file provided","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"error":{"type":"string"},"statusCode":{"type":"number"}}}}}},"404":{"description":"Transaction not found","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"error":{"type":"string"},"statusCode":{"type":"number"}}}}}}},"summary":"Upload image to transaction","tags":["Transaction"]}},"/express/transaction/{id}/images":{"get":{"operationId":"TransactionController_getTransactionImages","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"stage","required":false,"in":"query","description":"Filter images by upload stage","schema":{"enum":["scheduled","stageOne","stageTwo","stageThree","completed","cancelled"],"type":"string"}}],"responses":{"200":{"description":"Images retrieved successfully","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"key":{"type":"string"},"url":{"type":"string"},"isActive":{"type":"boolean"},"uploadedAtStage":{"type":"string","enum":["scheduled","stageOne","stageTwo","stageThree","completed","cancelled"]},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}}}}}}},"summary":"Get transaction images filtered by stage","tags":["Transaction"]}},"/express/transaction/{id}/images/grouped":{"get":{"operationId":"TransactionController_getTransactionImagesGrouped","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Images grouped by stage retrieved successfully","content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"key":{"type":"string"},"url":{"type":"string"},"isActive":{"type":"boolean"},"uploadedAtStage":{"type":"string","enum":["scheduled","stageOne","stageTwo","stageThree","completed","cancelled"]},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}}}}}}}},"summary":"Get transaction images grouped by upload stage","tags":["Transaction"]}},"/express/transaction/assign-technician":{"post":{"operationId":"TransactionController_assignTechnicianToPhase","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AssignTechnicianToPhaseDto"}}}},"responses":{"201":{"description":"Technicians assigned successfully","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"technicianId":{"type":"string"},"transactionId":{"type":"string"},"phase":{"type":"string","enum":["stageOne","stageTwo","stageThree"]},"assignedAt":{"type":"string","format":"date-time"},"technician":{"type":"object","properties":{"id":{"type":"string"},"fName":{"type":"string"},"lName":{"type":"string"}}}}}}}}},"400":{"description":"Invalid phase, technicians already assigned, or no technician IDs provided"}},"summary":"Assign multiple technicians to a specific phase of a transaction","tags":["Transaction"]}},"/express/transaction/{id}/assignments":{"get":{"operationId":"TransactionController_getTransactionAssignments","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Assignments retrieved successfully","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"technicianId":{"type":"string"},"transactionId":{"type":"string"},"phase":{"type":"string","enum":["scheduled","stageOne","stageTwo","stageThree","completed","cancelled"]},"assignedAt":{"type":"string","format":"date-time"},"startedAt":{"type":"string","format":"date-time","nullable":true},"completedAt":{"type":"string","format":"date-time","nullable":true},"isActive":{"type":"boolean"},"technician":{"type":"object","properties":{"id":{"type":"string"},"fName":{"type":"string"},"lName":{"type":"string"}}}}}}}}}},"summary":"Get all technician assignments for a transaction","tags":["Transaction"]}},"/express/transaction/{id}/assignments/{phase}":{"get":{"operationId":"TransactionController_getPhaseAssignments","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"phase","required":true,"in":"query","description":"Phase to get assignments for","schema":{"enum":["stageOne","stageTwo","stageThree"],"type":"string"}}],"responses":{"200":{"description":"Phase assignments retrieved successfully"}},"summary":"Get technician assignments for a specific phase","tags":["Transaction"]}},"/express/audit-log/findMany":{"get":{"operationId":"AuditLogController_findMany","parameters":[{"name":"skip","required":false,"in":"query","schema":{"type":"number"}},{"name":"take","required":false,"in":"query","schema":{"type":"number"}},{"name":"search","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuditLogManyResponse"}}}}},"tags":["Audit-Log"]}},"/express/audit-log/transaction/{transactionId}":{"get":{"operationId":"AuditLogController_getTransactionLogs","parameters":[{"name":"transactionId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"Get audit logs for a specific transaction","tags":["Audit-Log"]}},"/express/audit-log/technician/{technicianId}":{"get":{"operationId":"AuditLogController_getTechnicianLogs","parameters":[{"name":"technicianId","required":true,"in":"path","schema":{"type":"string"}},{"name":"skip","required":false,"in":"query","schema":{"type":"number"}},{"name":"take","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":""}},"summary":"Get audit logs for a specific technician","tags":["Audit-Log"]}},"/express/audit-log/transaction/{transactionId}/work-history":{"get":{"operationId":"AuditLogController_getTransactionWorkHistory","parameters":[{"name":"transactionId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"Get complete work history for a transaction","tags":["Audit-Log"]}},"/express/audit-log/transaction/{transactionId}/assignments":{"get":{"operationId":"AuditLogController_getTransactionAssignments","parameters":[{"name":"transactionId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"Get technician assignments for a transaction","tags":["Audit-Log"]}},"/express/audit-log/technician/{technicianId}/assignments":{"get":{"operationId":"AuditLogController_getTechnicianAssignments","parameters":[{"name":"technicianId","required":true,"in":"path","schema":{"type":"string"}},{"name":"isActive","required":false,"in":"query","schema":{"type":"boolean"}}],"responses":{"200":{"description":""}},"summary":"Get assignments for a technician","tags":["Audit-Log"]}},"/express/audit-log/assign-technician":{"post":{"operationId":"AuditLogController_assignTechnician","parameters":[],"responses":{"201":{"description":""}},"summary":"Assign technician to transaction phase","tags":["Audit-Log"]}},"/express/audit-log/start-work":{"post":{"operationId":"AuditLogController_startWork","parameters":[],"responses":{"201":{"description":""}},"summary":"Start work on transaction phase","tags":["Audit-Log"]}},"/express/audit-log/complete-work":{"post":{"operationId":"AuditLogController_completeWork","parameters":[],"responses":{"201":{"description":""}},"summary":"Complete work on transaction phase","tags":["Audit-Log"]}},"/express/Integration/findMany":{"get":{"operationId":"IntegrationController_findMany","parameters":[],"responses":{"200":{"description":"Returns services and add-ons mapped to POS format"}},"summary":"Get all pos tickets","tags":["Integration"]}},"/express/Integration/mark-paid/{orderId}":{"post":{"operationId":"IntegrationController_markTransactionAsPaid","parameters":[{"name":"orderId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Transaction marked as paid successfully"},"400":{"description":"Transaction is already marked as paid"},"404":{"description":"Order not found"}},"summary":"Mark transaction as paid by order number","tags":["Integration"]}},"/express/Integration/mark-pulled/{orderId}":{"post":{"operationId":"IntegrationController_markTransactionAsPulled","parameters":[{"name":"orderId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Transaction marked as pulled successfully"},"400":{"description":"Transaction is already marked as pulled"},"404":{"description":"Order not found"}},"summary":"Mark transaction as pulled by order number","tags":["Integration"]}},"/express/technician/create":{"post":{"description":"Create a new technician with first name, last name, and active status","operationId":"TechnicianController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTechnicianDto"}}}},"responses":{"201":{"description":"Technician created successfully"},"400":{"description":"Bad request - validation failed","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"error":{"type":"string"},"statusCode":{"type":"number"}}}}}},"4XX":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}},"summary":"Create a new technician","tags":["Technician"]}},"/express/technician/findMany":{"get":{"description":"Get a paginated list of technicians with their work statistics and latest actions","operationId":"TechnicianController_findMany","parameters":[{"name":"search","required":false,"in":"query","description":"Search by technician name","schema":{"type":"string"}},{"name":"skip","required":false,"in":"query","description":"Number of records to skip for pagination","schema":{"type":"number"}},{"name":"take","required":false,"in":"query","description":"Number of records to return (max 100)","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TechnicianManyResponse"}}}}},"summary":"Find technicians with pagination","tags":["Technician"]}},"/express/technician/active-shifts":{"get":{"description":"Get all technicians who have active shifts or overtime for today (for ticket assignment)","operationId":"TechnicianController_getActiveShiftTechnicians","parameters":[],"responses":{"200":{"description":"Active shift technicians retrieved successfully","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"fName":{"type":"string"},"lName":{"type":"string"},"status":{"type":"string"}}}}}}}},"summary":"Get technicians with active shifts","tags":["Technician"]}},"/express/technician/{id}/start-shift":{"post":{"description":"Start a new work shift for the technician","operationId":"TechnicianController_startShift","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Shift started successfully"},"400":{"description":"Shift already started or validation error"},"404":{"description":"Technician not found"}},"summary":"Start technician shift","tags":["Technician"]}},"/express/technician/{id}/end-shift":{"post":{"description":"End the current work shift for the technician","operationId":"TechnicianController_endShift","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Shift ended successfully"},"400":{"description":"No active shift or validation error"},"404":{"description":"Technician not found"}},"summary":"End technician shift","tags":["Technician"]}},"/express/technician/{id}/start-break":{"post":{"description":"Start a break during active shift","operationId":"TechnicianController_startBreak","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Break started successfully"},"400":{"description":"No active shift or break already started"},"404":{"description":"Technician not found"}},"summary":"Start technician break","tags":["Technician"]}},"/express/technician/{id}/end-break":{"post":{"description":"End the current break during active shift","operationId":"TechnicianController_endBreak","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Break ended successfully"},"400":{"description":"No active break or validation error"},"404":{"description":"Technician not found"}},"summary":"End technician break","tags":["Technician"]}},"/express/technician/{id}/start-overtime":{"post":{"description":"Start overtime work during active shift","operationId":"TechnicianController_startOvertime","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Overtime started successfully"},"400":{"description":"No active shift or overtime already started"},"404":{"description":"Technician not found"}},"summary":"Start technician overtime","tags":["Technician"]}},"/express/technician/{id}/end-overtime":{"post":{"description":"End the current overtime work during active shift","operationId":"TechnicianController_endOvertime","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Overtime ended successfully"},"400":{"description":"No active overtime or validation error"},"404":{"description":"Technician not found"}},"summary":"End technician overtime","tags":["Technician"]}},"/express/technician/{id}/daily-working-hours":{"get":{"description":"Get detailed working hours breakdown for a specific date","operationId":"TechnicianController_getDailyWorkingHours","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"date","required":true,"in":"query","description":"Date to get working hours for (YYYY-MM-DD format)","schema":{"example":"2024-12-31","type":"string"}}],"responses":{"200":{"description":"Working hours retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"date":{"type":"string"},"shiftTime":{"type":"string","example":"08:00:00"},"breakTime":{"type":"string","example":"01:00:00"},"overtimeTime":{"type":"string","example":"02:00:00"},"totalWorkingTime":{"type":"string","example":"09:00:00"}}}}}},"404":{"description":"Technician not found"}},"summary":"Get technician daily working hours","tags":["Technician"]}},"/express/technician/{id}":{"put":{"description":"Update technician information (name, status, etc.)","operationId":"TechnicianController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTechnicianDto"}}}},"responses":{"200":{"description":"Technician updated successfully"},"400":{"description":"Invalid input data"},"404":{"description":"Technician not found"}},"summary":"Update technician details","tags":["Technician"]},"delete":{"description":"Remove a technician from the system","operationId":"TechnicianController_delete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Technician deleted successfully"},"404":{"description":"Technician not found"}},"summary":"Delete technician","tags":["Technician"]}},"/express/technician/{id}/start-work":{"post":{"description":"Record when a technician starts working on a specific transaction phase","operationId":"TechnicianController_startWorkOnTransaction","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"transactionId":{"type":"string","format":"uuid"},"phase":{"type":"string","enum":["scheduled","stageOne","stageTwo","stageThree","completed","cancelled"]}},"required":["transactionId","phase"]}}}},"responses":{"200":{"description":"Work started successfully"},"400":{"description":"Invalid input data"},"404":{"description":"Technician or transaction not found"}},"summary":"Start work on transaction phase","tags":["Technician"]}},"/express/technician/{id}/complete-work":{"post":{"description":"Record when a technician completes work on a specific transaction phase","operationId":"TechnicianController_completeWorkOnTransaction","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"transactionId":{"type":"string","format":"uuid"},"phase":{"type":"string","enum":["scheduled","stageOne","stageTwo","stageThree","completed","cancelled"]}},"required":["transactionId","phase"]}}}},"responses":{"200":{"description":"Work completed successfully"},"400":{"description":"Invalid input data"},"404":{"description":"Technician or transaction not found"}},"summary":"Complete work on transaction phase","tags":["Technician"]}},"/express/technician/{id}/assignments":{"get":{"operationId":"TechnicianController_getTechnicianAssignments","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"isActive","required":false,"in":"query","description":"Filter by active assignments","schema":{"type":"boolean"}}],"responses":{"200":{"description":"Technician assignments retrieved successfully","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"technicianId":{"type":"string"},"transactionId":{"type":"string"},"phase":{"type":"string","enum":["scheduled","stageOne","stageTwo","stageThree","completed","cancelled"]},"assignedAt":{"type":"string","format":"date-time"},"startedAt":{"type":"string","format":"date-time","nullable":true},"completedAt":{"type":"string","format":"date-time","nullable":true},"isActive":{"type":"boolean"},"transaction":{"type":"object","properties":{"id":{"type":"string"},"status":{"type":"string"},"customer":{"type":"object","properties":{"fName":{"type":"string"},"lName":{"type":"string"}}}}}}}}}}}},"summary":"Get technician assignments by technician ID","tags":["Technician"]}},"/express/technician/{id}/audit-logs":{"get":{"description":"Get paginated audit logs for a specific technician showing all their activities","operationId":"TechnicianController_getTechnicianAuditLogs","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"skip","required":false,"in":"query","description":"Number of records to skip","schema":{"type":"number"}},{"name":"take","required":false,"in":"query","description":"Number of records to return","schema":{"type":"number"}}],"responses":{"200":{"description":"Audit logs retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"action":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"phase":{"type":"string","nullable":true},"description":{"type":"string","nullable":true},"metadata":{"type":"object","nullable":true}}}},"total":{"type":"number"}}}}}},"404":{"description":"Technician not found"}},"summary":"Get technician audit logs","tags":["Technician"]}},"/express/service/create":{"post":{"operationId":"ServiceController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateServiceDto"}}}},"responses":{"4XX":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}},"tags":["Service"]}},"/express/service/findMany":{"get":{"operationId":"ServiceController_findMany","parameters":[],"responses":{"4XX":{"schema":{"type":"object","properties":{"error":{"type":"string"}}},"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ServiceResponse"}}}}}},"tags":["Service"]}},"/express/service/{id}":{"put":{"operationId":"ServiceController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateServiceDto"}}}},"responses":{"200":{"description":""}},"tags":["Service"]},"delete":{"operationId":"ServiceController_delete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Service"]}},"/express/add-ons/create":{"post":{"operationId":"AddOnsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAddOnDto"}}}},"responses":{"4XX":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}},"tags":["Add-ons"]}},"/express/add-ons/findMany":{"get":{"operationId":"AddOnsController_findMany","parameters":[{"name":"skip","required":false,"in":"query","schema":{"type":"number"}},{"name":"take","required":false,"in":"query","schema":{"type":"number"}},{"name":"search","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddOnsManyResponse"}}}}},"tags":["Add-ons"]}},"/express/add-ons/{id}":{"put":{"operationId":"AddOnsController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAddOnDto"}}}},"responses":{"200":{"description":""}},"tags":["Add-ons"]},"delete":{"operationId":"AddOnsController_delete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Add-ons"]}},"/express/statistics/cardStats":{"get":{"operationId":"StatisticsController_getCardStats","parameters":[{"name":"range","required":false,"in":"query","schema":{"default":"all","enum":["day","month","year","all"],"type":"string"}},{"name":"customStart","required":false,"in":"query","schema":{"format":"date-time","type":"string"}},{"name":"customEnd","required":false,"in":"query","schema":{"format":"date-time","type":"string"}}],"responses":{"4XX":{"schema":{"type":"object","properties":{"error":{"type":"string"}}},"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CardStatsResponse"}}}}},"tags":["Statistics"]}},"/express/statistics/completionRatios":{"get":{"operationId":"StatisticsController_getRatio","parameters":[{"name":"range","required":false,"in":"query","schema":{"default":"all","enum":["day","month","year","all"],"type":"string"}},{"name":"customStart","required":false,"in":"query","schema":{"format":"date-time","type":"string"}},{"name":"customEnd","required":false,"in":"query","schema":{"format":"date-time","type":"string"}}],"responses":{"4XX":{"schema":{"type":"object","properties":{"error":{"type":"string"}}},"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompletionRatioResponse"}}}}},"tags":["Statistics"]}},"/express/statistics/revenue":{"get":{"operationId":"StatisticsController_getRevenueStatistics","parameters":[{"name":"range","required":false,"in":"query","schema":{"default":"all","enum":["day","month","year","all"],"type":"string"}},{"name":"customStart","required":false,"in":"query","schema":{"format":"date-time","type":"string"}},{"name":"customEnd","required":false,"in":"query","schema":{"format":"date-time","type":"string"}}],"responses":{"4XX":{"schema":{"type":"object","properties":{"error":{"type":"string"}}},"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RevenueSummary"}}}}},"tags":["Statistics"]}},"/express/statistics/topCustomers":{"get":{"operationId":"StatisticsController_getTopCustomers","parameters":[{"name":"range","required":false,"in":"query","schema":{"default":"all","enum":["day","month","year","all"],"type":"string"}},{"name":"customStart","required":false,"in":"query","schema":{"format":"date-time","type":"string"}},{"name":"customEnd","required":false,"in":"query","schema":{"format":"date-time","type":"string"}},{"name":"limit","required":false,"in":"query","description":"Number of top customers to return (default: 5)","schema":{"type":"number"}}],"responses":{"4XX":{"schema":{"type":"object","properties":{"error":{"type":"string"}}},"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TopCustomer"}}}}},"tags":["Statistics"]}},"/express/statistics/peakAnalysis":{"get":{"operationId":"StatisticsController_getPeakAnalysis","parameters":[{"name":"range","required":false,"in":"query","schema":{"default":"all","enum":["day","month","year","all"],"type":"string"}},{"name":"customStart","required":false,"in":"query","schema":{"format":"date-time","type":"string"}},{"name":"customEnd","required":false,"in":"query","schema":{"format":"date-time","type":"string"}}],"responses":{"4XX":{"schema":{"type":"object","properties":{"error":{"type":"string"}}},"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PeakAnalysisResponse"}}}}},"tags":["Statistics"]}},"/express/statistics/technicianUtilization":{"get":{"operationId":"StatisticsController_getTechnicianUtilization","parameters":[{"name":"range","required":false,"in":"query","schema":{"default":"all","enum":["day","month","year","all"],"type":"string"}},{"name":"customStart","required":false,"in":"query","schema":{"format":"date-time","type":"string"}},{"name":"customEnd","required":false,"in":"query","schema":{"format":"date-time","type":"string"}}],"responses":{"4XX":{"schema":{"type":"object","properties":{"error":{"type":"string"}}},"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TechnicianUtilizationResponse"}}}}}},"tags":["Statistics"]}},"/express/statistics/stageBottlenecks":{"get":{"operationId":"StatisticsController_getServiceStageBottlenecks","parameters":[{"name":"range","required":false,"in":"query","schema":{"default":"all","enum":["day","month","year","all"],"type":"string"}},{"name":"customStart","required":false,"in":"query","schema":{"format":"date-time","type":"string"}},{"name":"customEnd","required":false,"in":"query","schema":{"format":"date-time","type":"string"}}],"responses":{"4XX":{"schema":{"type":"object","properties":{"error":{"type":"string"}}},"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ServiceStageBottleneckResponse"}}}}}},"tags":["Statistics"]}},"/express/statistics/userAddOnSales":{"get":{"operationId":"StatisticsController_getUserAddOnSales","parameters":[{"name":"range","required":false,"in":"query","schema":{"default":"all","enum":["day","month","year","all"],"type":"string"}},{"name":"customStart","required":false,"in":"query","schema":{"format":"date-time","type":"string"}},{"name":"customEnd","required":false,"in":"query","schema":{"format":"date-time","type":"string"}}],"responses":{"200":{"description":"Returns user add-on sales statistics","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserAddOnSalesResponse"}}}}},"4XX":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}},"tags":["Statistics"]}},"/express/statistics/dailyReport":{"get":{"operationId":"StatisticsController_getDailyReport","parameters":[{"name":"date","required":true,"in":"query","description":"Date for the daily report in YYYY-MM-DD format","schema":{"example":"2023-12-01","type":"string"}}],"responses":{"200":{"description":"Returns comprehensive daily report with technician shifts, cash summary, and user sales","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DailyReportResponseDto"}}}},"4XX":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}},"tags":["Statistics"]}},"/express/statistics/detailedSalesReport":{"get":{"operationId":"StatisticsController_getDetailedSalesReport","parameters":[{"name":"startDate","required":false,"in":"query","description":"Start date for the report (YYYY-MM-DD)","schema":{"example":"2023-12-01","type":"string"}},{"name":"endDate","required":false,"in":"query","description":"End date for the report (YYYY-MM-DD)","schema":{"example":"2023-12-31","type":"string"}},{"name":"includeIncomplete","required":false,"in":"query","description":"Include sales from incomplete transactions","schema":{"example":false,"type":"boolean"}}],"responses":{"200":{"description":"Returns detailed sales report showing who sold what","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"transactionId":{"type":"string"},"saleType":{"type":"string","enum":["SERVICE","ADDON"]},"itemName":{"type":"string"},"price":{"type":"number"},"quantity":{"type":"number"},"totalAmount":{"type":"number"},"soldAt":{"type":"string","format":"date-time"},"sellerType":{"type":"string","enum":["USER","SALES_PERSON"]},"sellerName":{"type":"string"},"sellerRole":{"type":"string"},"transactionStatus":{"type":"string"}}}}}}}},"tags":["Statistics"]}},"/express/statistics/customer/{customerId}/visits":{"get":{"operationId":"StatisticsController_getNumberOfVisitsPerCustomer","parameters":[{"name":"customerId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Returns number of completed visits for a specific customer","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerVisitsResponse"}}}},"4XX":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}},"tags":["Statistics"]}},"/express/statistics/subscriptions/stats":{"get":{"operationId":"StatisticsController_getSubscriptionStatistics","parameters":[{"name":"range","required":false,"in":"query","schema":{"default":"all","enum":["day","month","year","all"],"type":"string"}},{"name":"customStart","required":false,"in":"query","schema":{"format":"date-time","type":"string"}},{"name":"customEnd","required":false,"in":"query","schema":{"format":"date-time","type":"string"}}],"responses":{"200":{"description":"Returns subscription statistics including total, active, activated, and expired counts","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionStatisticsResponse"}}}},"4XX":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}},"tags":["Statistics"]}},"/express/statistics/subscriptions/daily-revenue":{"get":{"operationId":"StatisticsController_getDailySubscriptionRevenue","parameters":[{"name":"range","required":false,"in":"query","schema":{"default":"all","enum":["day","month","year","all"],"type":"string"}},{"name":"customStart","required":false,"in":"query","schema":{"format":"date-time","type":"string"}},{"name":"customEnd","required":false,"in":"query","schema":{"format":"date-time","type":"string"}}],"responses":{"200":{"description":"Returns daily subscription revenue data with date and revenue amount","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DailySubscriptionRevenueResponse"}}}}},"4XX":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}},"tags":["Statistics"]}},"/express/statistics/subscriptions/services-usage":{"get":{"operationId":"StatisticsController_getSubscriptionServicesUsage","parameters":[{"name":"range","required":false,"in":"query","schema":{"default":"all","enum":["day","month","year","all"],"type":"string"}},{"name":"customStart","required":false,"in":"query","schema":{"format":"date-time","type":"string"}},{"name":"customEnd","required":false,"in":"query","schema":{"format":"date-time","type":"string"}}],"responses":{"200":{"description":"Returns subscription services usage statistics showing allocated, used, and unused counts","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SubscriptionServicesUsageResponse"}}}}},"4XX":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}},"tags":["Statistics"]}},"/express/statistics/newCustomers":{"get":{"operationId":"StatisticsController_getNewCustomers","parameters":[{"name":"range","required":false,"in":"query","schema":{"default":"all","enum":["day","month","year","all"],"type":"string"}},{"name":"customStart","required":false,"in":"query","schema":{"format":"date-time","type":"string"}},{"name":"customEnd","required":false,"in":"query","schema":{"format":"date-time","type":"string"}}],"responses":{"200":{"description":"Returns new customers filtered by date range with their first name, last name, and mobile number","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/NewCustomerResponse"}}}}},"4XX":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}},"tags":["Statistics"]}},"/express/statistics/serviceCarTypeRevenue":{"get":{"operationId":"StatisticsController_getServiceCarTypeRevenue","parameters":[{"name":"range","required":false,"in":"query","schema":{"default":"all","enum":["day","month","year","all"],"type":"string"}},{"name":"customStart","required":false,"in":"query","schema":{"format":"date-time","type":"string"}},{"name":"customEnd","required":false,"in":"query","schema":{"format":"date-time","type":"string"}}],"responses":{"200":{"description":"Returns completed service revenue grouped by service and car type","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ServiceCarTypeRevenueResponse"}}}}},"4XX":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}},"tags":["Statistics"]}},"/express/images/upload":{"post":{"operationId":"ImageController_uploadImage","parameters":[],"requestBody":{"required":true,"description":"Image file upload","content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary"}}}}}},"responses":{"201":{"description":"Image uploaded successfully"},"400":{"description":"Bad request"}},"summary":"Upload an image","tags":["Image"]}},"/express/images":{"get":{"operationId":"ImageController_fetchAll","parameters":[{"name":"uploadedAtStage","required":false,"in":"query","description":"Filter images by upload stage","schema":{"enum":["scheduled","stageOne","stageTwo","stageThree","completed","cancelled"],"type":"string"}}],"responses":{"200":{"description":"Images retrieved successfully"}},"summary":"Get all images with optional stage filtering","tags":["Image"]}},"/express/images/serve/{key}":{"get":{"operationId":"ImageController_serveImage","parameters":[{"name":"key","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Image served successfully"},"404":{"description":"Image not found"}},"summary":"Serve image with proper CORS headers","tags":["Image"]}},"/express/images/{id}":{"delete":{"operationId":"ImageController_deleteImage","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Image"]}},"/express/auth/signup":{"post":{"description":"Create a new user account with mobile number, password, and role","operationId":"AuthController_signup","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignupDto"}}}},"responses":{"201":{"description":"User registered successfully","content":{"application/json":{"schema":{"type":"object","properties":{"access_token":{"type":"string","description":"JWT access token"},"refresh_token":{"type":"string","description":"JWT refresh token"}}}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"array","items":{"type":"string"}},"error":{"type":"string"},"statusCode":{"type":"number"}}}}}},"409":{"description":"Mobile number already in use","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"error":{"type":"string"},"statusCode":{"type":"number"}}}}}}},"summary":"Register a new user","tags":["Auth"]}},"/express/auth/signin":{"post":{"description":"Authenticate user with mobile number and password. Sets httpOnly cookies for tokens.","operationId":"AuthController_signin","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SigninDto"}}}},"responses":{"200":{"description":"User signed in successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"access_token":{"type":"string","description":"JWT access token (also set as httpOnly cookie)"}}}}}},"401":{"description":"Invalid credentials","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"error":{"type":"string"},"statusCode":{"type":"number"}}}}}}},"summary":"Sign in user","tags":["Auth"]}},"/express/auth/refresh":{"post":{"description":"Generate new access and refresh tokens using existing refresh token from cookies. This endpoint is also automatically called by middleware when refresh token is present without access token.","operationId":"AuthController_refresh","parameters":[],"responses":{"200":{"description":"Tokens refreshed successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"access_token":{"type":"string","description":"New JWT access token (also set as httpOnly cookie)"}}}}}},"401":{"description":"Refresh token not found or invalid","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"error":{"type":"string"},"statusCode":{"type":"number"}}}}}}},"summary":"Refresh access token","tags":["Auth"]}},"/express/auth/logout":{"post":{"description":"Clear authentication cookies and sign out the user","operationId":"AuthController_logout","parameters":[],"responses":{"200":{"description":"User logged out successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}}}}}}},"summary":"Logout user","tags":["Auth"]}},"/express/auth/me":{"get":{"operationId":"AuthController_getCurrentUser","parameters":[],"responses":{"200":{"description":"User information retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserInfoResponse"}}}},"401":{"description":"Unauthorized"}},"security":[{"auth":[]}],"summary":"Get current user information","tags":["Auth"]}},"/express/auth/delete":{"delete":{"operationId":"AuthController_deleteUser","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteUserDto"}}}},"responses":{"200":{"description":"User deactivated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}}}}}},"401":{"description":"Unauthorized - Admin role required"},"404":{"description":"User not found"}},"security":[{"auth":[]}],"summary":"Delete a user (Admin only)","tags":["Auth"]}},"/express/auth/reset-password":{"post":{"description":"Allows an admin to reset a user's password by providing their mobile number and new password","operationId":"AuthController_resetPassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordDto"}}}},"responses":{"200":{"description":"Password reset successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}}}}}},"401":{"description":"Unauthorized - Admin role required"},"404":{"description":"User not found"}},"security":[{"auth":[]}],"summary":"Reset user password (Admin only)","tags":["Auth"]}},"/express/auth/update":{"put":{"description":"Allows a user to update their name and/or mobile number","operationId":"AuthController_updateUser","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserDto"}}}},"responses":{"200":{"description":"User updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserInfoResponse"}}}},"401":{"description":"Unauthorized"},"409":{"description":"Mobile number already in use"}},"security":[{"auth":[]}],"summary":"Update current user profile","tags":["Auth"]}},"/express/auth/supervisors":{"get":{"operationId":"AuthController_getSupervisors","parameters":[],"responses":{"200":{"description":"Supervisor users retrieved successfully","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"userId":{"type":"string"},"name":{"type":"string"},"mobileNumber":{"type":"string"},"role":{"type":"string","enum":["SUPERVISOR"]},"isActive":{"type":"boolean"},"createdAt":{"type":"string","format":"date-time"}}}}}}},"401":{"description":"Unauthorized"}},"security":[{"auth":[]}],"summary":"Get all users with supervisor role","tags":["Auth"]}},"/express/seeder/seed-from-file":{"post":{"operationId":"SeederController_seedFromFile","parameters":[],"responses":{"201":{"description":""}},"tags":["Seeder"]}},"/express/seeder/seed-from-upload":{"post":{"operationId":"SeederController_seedFromUpload","parameters":[],"responses":{"201":{"description":""}},"tags":["Seeder"]}},"/express/seeder/brands":{"get":{"operationId":"SeederController_getBrands","parameters":[{"name":"name","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Seeder"]}},"/express/seeder/stats":{"get":{"operationId":"SeederController_getStats","parameters":[],"responses":{"200":{"description":""}},"tags":["Seeder"]}},"/express/sales":{"post":{"operationId":"SalesController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSalesDto"}}}},"responses":{"201":{"description":"Sales person created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SalesResponse"}}}},"409":{"description":"Sales person with this mobile number already exists"}},"security":[{"bearer":[]}],"summary":"Create a new sales person","tags":["Sales"]},"get":{"operationId":"SalesController_findMany","parameters":[{"name":"search","required":false,"in":"query","description":"Search by name or mobile","schema":{"type":"string"}},{"name":"isActive","required":false,"in":"query","description":"Filter by active status","schema":{"type":"boolean"}},{"name":"skip","required":false,"in":"query","schema":{"type":"number"}},{"name":"take","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"Sales persons retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SalesManyResponse"}}}}},"security":[{"bearer":[]}],"summary":"Get all sales persons with filters","tags":["Sales"]},"patch":{"operationId":"SalesController_update","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSalesDto"}}}},"responses":{"200":{"description":"Sales person updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SalesResponse"}}}},"404":{"description":"Sales person not found"},"409":{"description":"Sales person with this mobile number already exists"}},"security":[{"bearer":[]}],"summary":"Update a sales person","tags":["Sales"]}},"/express/sales/{id}":{"get":{"operationId":"SalesController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Sales person retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SalesResponse"}}}},"404":{"description":"Sales person not found"}},"security":[{"bearer":[]}],"summary":"Get a sales person by ID","tags":["Sales"]},"delete":{"operationId":"SalesController_delete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Sales person deleted successfully"},"404":{"description":"Sales person not found"},"409":{"description":"Cannot delete sales person with active assignments"}},"security":[{"bearer":[]}],"summary":"Delete a sales person","tags":["Sales"]}},"/express/subscription/create":{"post":{"operationId":"SubscriptionController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSubscriptionDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionResponseDto"}}}},"400":{"description":"Bad Request - Invalid data"}},"summary":"Create a new subscription template","tags":["Subscription"]}},"/express/subscription/purchase":{"post":{"operationId":"SubscriptionController_purchaseSubscription","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PurchaseSubscriptionDto"}}}},"responses":{"201":{"description":"Subscription purchased successfully"},"400":{"description":"Invalid purchase data"},"404":{"description":"Customer, Car, or Subscription not found"}},"summary":"Purchase a subscription for a customer","tags":["Subscription"]}},"/express/subscription/activate":{"post":{"operationId":"SubscriptionController_activateSubscription","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActivateSubscriptionDto"}}}},"responses":{"200":{"description":"Subscription activated successfully"},"404":{"description":"Customer subscription or QR code not found"},"409":{"description":"QR code already in use"}},"summary":"Activate a purchased subscription with QR code","tags":["Subscription"]}},"/express/subscription/assign-qr-code":{"post":{"operationId":"subscriptionControllerAssignQrCode","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AssignQRCodeDto"}}}},"responses":{"200":{"description":"QR code assigned successfully"},"404":{"description":"Customer subscription or QR code not found"},"409":{"description":"QR code already in use"}},"summary":"Assign QR code to a customer subscription","tags":["Subscription"]}},"/express/subscription/customer-subscriptions":{"get":{"operationId":"SubscriptionController_getAllCustomerSubscriptions","parameters":[],"responses":{"200":{"description":"List of all customer subscriptions","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AllCustomerSubscriptionsResponseDto"}}}}}},"summary":"Get all customer subscriptions","tags":["Subscription"]}},"/express/subscription/pending-activations":{"get":{"operationId":"SubscriptionController_getPendingActivations","parameters":[],"responses":{"200":{"description":"List of subscriptions waiting for QR code activation"}},"summary":"Get all purchased subscriptions pending activation","tags":["Subscription"]}},"/express/subscription/customer/{customerId}":{"get":{"operationId":"SubscriptionController_getCustomerSubscriptions","parameters":[{"name":"customerId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CustomerSubscriptionResponseDto"}}}}}},"summary":"Get all subscriptions for a customer","tags":["Subscription"]}},"/express/subscription/customer-subscription/{customerSubscriptionId}":{"delete":{"operationId":"SubscriptionController_deleteCustomerSubscription","parameters":[{"name":"customerSubscriptionId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Customer subscription deleted successfully"},"404":{"description":"Customer subscription not found"}},"summary":"Delete a customer subscription","tags":["Subscription"]}},"/express/subscription/use-service":{"post":{"operationId":"SubscriptionController_useService","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UseServiceDto"}}}},"responses":{"200":{"description":"Service used successfully"},"400":{"description":"Service not available or no remaining uses"},"404":{"description":"QR code or service not found"}},"summary":"Use a service from subscription via QR code","tags":["Subscription"]}},"/express/subscription/renew/{qrCodeId}":{"patch":{"operationId":"SubscriptionController_renewSubscription","parameters":[{"name":"qrCodeId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Subscription renewed successfully"},"400":{"description":"Subscription is not active"},"404":{"description":"Subscription not found for QR code"}},"summary":"Renew a customer subscription by QR code ID","tags":["Subscription"]}},"/express/subscription/qr/generate":{"post":{"operationId":"SubscriptionController_generateQRCodes","parameters":[{"name":"count","required":false,"in":"query","description":"Number of QR codes to generate (default: 1)","schema":{"type":"number"}}],"responses":{"201":{"description":"QR codes generated successfully"}},"summary":"Generate new QR codes","tags":["Subscription"]}},"/express/subscription/qr/available":{"get":{"operationId":"SubscriptionController_getAvailableQRCodes","parameters":[],"responses":{"200":{"description":"List of available QR codes"}},"summary":"Get all available (unused) QR codes","tags":["Subscription"]}},"/express/subscription/qr/all":{"get":{"operationId":"SubscriptionController_getAllQRCodes","parameters":[],"responses":{"200":{"description":"List of all QR codes"}},"summary":"Get all QR codes with their usage status","tags":["Subscription"]}},"/express/subscription/qr/find/{code}":{"get":{"operationId":"SubscriptionController_findQRByCode","parameters":[{"name":"code","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"QR code details"},"404":{"description":"QR code not found"}},"summary":"Find QR code by code string","tags":["Subscription"]}},"/express/subscription/qr/{qrCode}":{"get":{"operationId":"SubscriptionController_getSubscriptionByQR","parameters":[{"name":"qrCode","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Subscription details"},"404":{"description":"No active subscription found for QR code"}},"summary":"Get subscription details by QR code","tags":["Subscription"]}},"/express/subscription/{id}":{"get":{"operationId":"SubscriptionController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionResponseDto"}}}},"404":{"description":"Subscription not found"}},"summary":"Get subscription template by ID","tags":["Subscription"]},"patch":{"operationId":"SubscriptionController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSubscriptionDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionResponseDto"}}}},"404":{"description":"Subscription not found"}},"summary":"Update subscription template","tags":["Subscription"]},"delete":{"operationId":"SubscriptionController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Subscription deleted successfully"},"400":{"description":"Cannot delete subscription with active customers"},"404":{"description":"Subscription not found"}},"summary":"Delete subscription template","tags":["Subscription"]}},"/express/subscription":{"get":{"operationId":"SubscriptionController_findAll","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SubscriptionResponseDto"}}}}}},"summary":"Get all active subscription templates","tags":["Subscription"]}},"/express/daily-notes":{"post":{"operationId":"DailyNoteController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateDailyNoteDto"}}}},"responses":{"201":{"description":"Daily note created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DailyNoteResponse"}}}},"400":{"description":"Bad request - Invalid data"},"404":{"description":"Images not found"}},"summary":"Create a new daily note","tags":["Daily Notes"]},"get":{"operationId":"DailyNoteController_findAll","parameters":[{"name":"date","required":false,"in":"query","description":"Filter by specific date (YYYY-MM-DD)","schema":{"example":"2024-03-15","type":"string"}},{"name":"startDate","required":false,"in":"query","description":"Filter by date range - start date (YYYY-MM-DD)","schema":{"example":"2024-03-01","type":"string"}},{"name":"endDate","required":false,"in":"query","description":"Filter by date range - end date (YYYY-MM-DD)","schema":{"example":"2024-03-31","type":"string"}},{"name":"createdById","required":false,"in":"query","description":"Filter by user who created the note","schema":{"example":"550e8400-e29b-41d4-a716-446655440000","type":"string"}},{"name":"page","required":false,"in":"query","description":"Page number (default: 1)","schema":{"example":1,"type":"string"}},{"name":"limit","required":false,"in":"query","description":"Number of items per page (default: 10)","schema":{"example":10,"type":"string"}}],"responses":{"200":{"description":"Daily notes retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DailyNotesListResponse"}}}}},"summary":"Get daily notes with optional filtering","tags":["Daily Notes"]}},"/express/daily-notes/with-images":{"post":{"operationId":"DailyNoteController_createWithImages","parameters":[],"requestBody":{"required":true,"description":"Daily note with images","content":{"multipart/form-data":{"schema":{"type":"object","properties":{"note":{"type":"string","description":"The content of the daily note"},"images":{"type":"array","items":{"type":"string","format":"binary"},"description":"Image files to attach (max 10)"}},"required":["note"]}}}},"responses":{"201":{"description":"Daily note with images created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DailyNoteResponse"}}}},"400":{"description":"Bad request - Invalid data"}},"summary":"Create a daily note with image uploads","tags":["Daily Notes"]}},"/express/daily-notes/by-date/{date}":{"get":{"operationId":"DailyNoteController_findByDate","parameters":[{"name":"date","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Daily notes for the specified date","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DailyNoteResponse"}}}}}},"summary":"Get daily notes for a specific date","tags":["Daily Notes"]}},"/express/daily-notes/{id}":{"get":{"operationId":"DailyNoteController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Daily note retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DailyNoteResponse"}}}},"404":{"description":"Daily note not found"}},"summary":"Get a daily note by ID","tags":["Daily Notes"]},"patch":{"operationId":"DailyNoteController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateDailyNoteDto"}}}},"responses":{"200":{"description":"Daily note updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DailyNoteResponse"}}}},"403":{"description":"Forbidden - can only edit own notes"},"404":{"description":"Daily note not found"}},"summary":"Update a daily note","tags":["Daily Notes"]},"delete":{"operationId":"DailyNoteController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Daily note deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Daily note deleted successfully"}}}}}},"403":{"description":"Forbidden - can only delete own notes"},"404":{"description":"Daily note not found"}},"summary":"Soft delete a daily note","tags":["Daily Notes"]}},"/express/daily-notes/{id}/with-images":{"patch":{"operationId":"DailyNoteController_updateWithImages","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"Updated daily note with images","content":{"multipart/form-data":{"schema":{"type":"object","properties":{"note":{"type":"string","description":"The updated content of the daily note"},"replaceImages":{"type":"boolean","description":"Whether to replace existing images or add to them","default":false},"images":{"type":"array","items":{"type":"string","format":"binary"},"description":"Image files to attach (max 10)"}}}}}},"responses":{"200":{"description":"Daily note with images updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DailyNoteResponse"}}}},"403":{"description":"Forbidden - can only edit own notes"},"404":{"description":"Daily note not found"}},"summary":"Update a daily note with new image uploads","tags":["Daily Notes"]}},"/express/reservations":{"post":{"description":"Creates a reservation for a customer. Customer must have an active subscription.","operationId":"ReservationController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateReservationDto"}}}},"responses":{"201":{"description":"Reservation created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReservationResponseDto"}}}},"400":{"description":"Customer does not have an active subscription"},"404":{"description":"Customer not found"}},"summary":"Create a new reservation","tags":["Reservations"]},"get":{"description":"Retrieves all active reservations that are not marked as done. Optionally filter by date.","operationId":"ReservationController_findAll","parameters":[{"name":"date","required":false,"in":"query","description":"Filter reservations by date (YYYY-MM-DD)","schema":{"example":"2025-10-18","type":"string"}}],"responses":{"200":{"description":"List of reservations","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ReservationResponseDto"}}}}}},"summary":"Get all reservations","tags":["Reservations"]}},"/express/reservations/{id}":{"get":{"operationId":"ReservationController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Reservation details","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReservationResponseDto"}}}},"404":{"description":"Reservation not found"}},"summary":"Get a reservation by ID","tags":["Reservations"]},"patch":{"description":"Updates reservation details including datetime, notes, or mark as done status","operationId":"ReservationController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateReservationDto"}}}},"responses":{"200":{"description":"Reservation updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReservationResponseDto"}}}},"404":{"description":"Reservation not found"}},"summary":"Update a reservation","tags":["Reservations"]},"delete":{"description":"Soft deletes a reservation by setting isActive to false","operationId":"ReservationController_delete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Reservation deleted successfully"},"404":{"description":"Reservation not found"}},"summary":"Delete a reservation","tags":["Reservations"]}}},"info":{"title":"API Documentation","description":"API documentation for Teletek integration","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"schemas":{"CreateCustomerDto":{"type":"object","properties":{"fName":{"type":"string","description":"First name of the customer"},"lName":{"type":"string","description":"Last name of the customer"},"mobileNumber":{"type":"string","description":"Mobile number of the customer"},"count":{"type":"number","description":"Initial count value","default":0},"isActive":{"type":"boolean","description":"Whether the customer is active","example":true,"default":true}},"required":["fName","lName"]},"ModelResponse":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"brandId":{"type":"string"},"carType":{"type":"string","enum":["Bike","Sedan","Crossover","SUV","VAN"]},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"}},"required":["id","name","brandId","carType","createdAt","updatedAt"]},"BrandResponse":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"logoUrl":{"type":"string"},"models":{"type":"array","items":{"$ref":"#/components/schemas/ModelResponse"}},"imageId":{"type":"string"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"}},"required":["id","name","models","imageId","createdAt","updatedAt"]},"CarResponse":{"type":"object","properties":{"id":{"type":"string"},"brandId":{"type":"string"},"customerId":{"type":"string"},"modelId":{"type":"string"},"brand":{"$ref":"#/components/schemas/BrandResponse"},"model":{"$ref":"#/components/schemas/ModelResponse"},"year":{"type":"string"},"plateNumber":{"type":"string"},"color":{"type":"string"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"}},"required":["id","brandId","customerId","modelId","brand","model","year","plateNumber","color","createdAt","updatedAt"]},"CustomerResponse":{"type":"object","properties":{"id":{"type":"string"},"fName":{"type":"string"},"lName":{"type":"string"},"mobileNumber":{"type":"string"},"count":{"type":"number"},"cars":{"type":"array","items":{"$ref":"#/components/schemas/CarResponse"}},"isActive":{"type":"boolean"},"isBlacklisted":{"type":"boolean"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"}},"required":["id","fName","lName","mobileNumber","count","cars","isActive","isBlacklisted","createdAt","updatedAt"]},"CustomersManyResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/CustomerResponse"}},"skip":{"type":"number"},"take":{"type":"number"},"rows":{"type":"number"}},"required":["data","skip","take","rows"]},"UpdateCustomerDto":{"type":"object","properties":{"id":{"type":"string"},"mobileNumber":{"type":"string","description":"Mobile number of the customer","example":"+1234567890"},"count":{"type":"number","description":"Count value","example":5},"fName":{"type":"string","description":"First name of the customer","example":"John"},"lName":{"type":"string","description":"Last name of the customer","example":"Doe"},"isActive":{"type":"boolean","description":"Whether the customer is active","example":true},"isBlacklisted":{"type":"boolean","description":"Whether the customer is blacklisted","example":false}},"required":["id"]},"ToggleBlacklistDto":{"type":"object","properties":{"id":{"type":"string","description":"Customer ID to toggle blacklist status","example":"550e8400-e29b-41d4-a716-446655440000"}},"required":["id"]},"CreateCarDto":{"type":"object","properties":{"customerId":{"type":"string"},"brandId":{"type":"string"},"modelId":{"type":"string"},"plateNumber":{"type":"string"},"year":{"type":"string"},"color":{"type":"string"}},"required":["customerId","brandId","modelId","plateNumber"]},"CreateBrandDto":{"type":"object","properties":{"name":{"type":"string"}},"required":["name"]},"BrandManyResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/BrandResponse"}},"skip":{"type":"number"},"take":{"type":"number"},"rows":{"type":"number"}},"required":["data","skip","take","rows"]},"CarType":{"type":"string","enum":["Bike","Sedan","Crossover","SUV","VAN"]},"CreateModelDto":{"type":"object","properties":{"name":{"type":"string"},"brandId":{"type":"string"},"type":{"default":"Sedan","allOf":[{"$ref":"#/components/schemas/CarType"}]}},"required":["name","brandId","type"]},"CreateTransactionDto":{"type":"object","properties":{"customerId":{"type":"string","description":"Customer ID who owns the car","format":"uuid","example":"550e8400-e29b-41d4-a716-446655440000"},"carId":{"type":"string","description":"Car ID to be serviced","format":"uuid","example":"550e8400-e29b-41d4-a716-446655440001"},"addOnsIds":{"description":"Array of add-on service IDs (optional)","example":["550e8400-e29b-41d4-a716-446655440002","550e8400-e29b-41d4-a716-446655440003"],"type":"array","items":{"type":"string"}},"note":{"type":"string","description":"Additional notes for the transaction (optional)","example":"Customer requested extra attention to scratches on front bumper"},"createdByUserId":{"type":"string","description":"ID of the user creating this transaction","format":"uuid","example":"550e8400-e29b-41d4-a716-446655440004"},"deliverTime":{"type":"string","description":"Expected delivery time (optional)","example":"14:30"},"serviceId":{"type":"string","description":"Service type ID to be performed","format":"uuid","example":"550e8400-e29b-41d4-a716-446655440005"}},"required":["customerId","carId","serviceId"]},"PriceByCarType":{"type":"object","properties":{"carType":{"type":"string","enum":["Bike","Sedan","Crossover","SUV","VAN"]},"price":{"type":"number"}},"required":["carType","price"]},"ServiceResponse":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"},"prices":{"type":"array","items":{"$ref":"#/components/schemas/PriceByCarType"}}},"required":["id","name","createdAt","updatedAt","prices"]},"AddOnsResponse":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"price":{"type":"number"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"}},"required":["id","name","price","createdAt","updatedAt"]},"InvoiceResponse":{"type":"object","properties":{"id":{"type":"string"},"transactionId":{"type":"string"},"totalAmount":{"type":"number"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"}},"required":["id","transactionId","totalAmount","createdAt","updatedAt"]},"ImageResponse":{"type":"object","properties":{"id":{"type":"string"},"key":{"type":"string"},"url":{"type":"string"},"isActive":{"type":"boolean"},"uploadedAtStage":{"type":"string","enum":["scheduled","stageOne","stageTwo","stageThree","completed","cancelled"]},"uploadedBy":{"type":"object","description":"User who uploaded this image"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"}},"required":["id","key","url","isActive","createdAt","updatedAt"]},"UserInfoResponse":{"type":"object","properties":{"userId":{"type":"string","description":"User ID","example":"97f70358-0f24-477f-8cfc-35b9179f0ee4"},"name":{"type":"string","description":"User name","example":"John Doe"},"mobileNumber":{"type":"string","description":"User mobile number","example":"0798765432"},"role":{"type":"string","description":"User role","enum":["ADMIN","SUPERVISOR"],"example":"ADMIN"},"isActive":{"type":"boolean","description":"Whether user is active","example":true},"createdAt":{"format":"date-time","type":"string","description":"User creation date","example":"2025-01-01T00:00:00.000Z"}},"required":["userId","name","mobileNumber","role","isActive","createdAt"]},"TransactionResponse":{"type":"object","properties":{"id":{"type":"string"},"status":{"type":"string","enum":["scheduled","stageOne","stageTwo","stageThree","completed","cancelled"]},"isPaid":{"type":"boolean"},"isPulled":{"type":"boolean"},"isSubscription":{"type":"boolean"},"customerId":{"type":"string"},"carId":{"type":"string"},"customer":{"$ref":"#/components/schemas/CustomerResponse"},"car":{"$ref":"#/components/schemas/CarResponse"},"service":{"$ref":"#/components/schemas/ServiceResponse"},"addOns":{"type":"array","items":{"$ref":"#/components/schemas/AddOnsResponse"}},"invoice":{"$ref":"#/components/schemas/InvoiceResponse"},"images":{"type":"array","items":{"$ref":"#/components/schemas/ImageResponse"}},"createdByUser":{"$ref":"#/components/schemas/UserInfoResponse"},"assignments":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"technicianId":{"type":"string"},"transactionId":{"type":"string"},"phase":{"type":"string"},"assignedAt":{"type":"string","format":"date-time"},"startedAt":{"type":"string","format":"date-time","nullable":true},"completedAt":{"type":"string","format":"date-time","nullable":true},"isActive":{"type":"boolean"},"technician":{"type":"object"}}}},"deliverTime":{"type":"string"},"notes":{"type":"string"},"OTP":{"type":"string"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"}},"required":["id","status","isPaid","isPulled","isSubscription","customerId","carId","customer","car","service","addOns","invoice","images","createdByUser","assignments","deliverTime","notes","OTP","createdAt","updatedAt"]},"TransactionManyResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/TransactionResponse"}},"skip":{"type":"number"},"take":{"type":"number"},"rows":{"type":"number"}},"required":["data","skip","take","rows"]},"CancelTransactionDto":{"type":"object","properties":{"notes":{"type":"string","description":"Notes for cancellation reason"}}},"UpdateTransactionDto":{"type":"object","properties":{"id":{"type":"string","description":"Transaction ID to update"},"status":{"type":"string","enum":["scheduled","stageOne","stageTwo","stageThree","completed","cancelled"],"description":"New status for the transaction"},"updatedByTechnicianId":{"type":"string","description":"ID of the technician making this update (for audit logging)"}},"required":["id"]},"EditScheduledTransactionDto":{"type":"object","properties":{"id":{"type":"string","description":"Transaction ID to edit (works for all statuses with restrictions)"},"serviceId":{"type":"string","description":"New service ID (only allowed for scheduled transactions)"},"addOnsIds":{"description":"Array of addon IDs to replace current addons (allowed for all statuses)","type":"array","items":{"type":"string"}},"deliverTime":{"type":"string","description":"Updated delivery time (only allowed for scheduled transactions)"},"notes":{"type":"string","description":"Updated notes (allowed for all statuses)"},"salesPersonId":{"type":"string","description":"Sales person ID for addon sales tracking (allowed for all statuses, required when adding new addons)"}},"required":["id"]},"CalculateTotalDto":{"type":"object","properties":{"serviceId":{"type":"string","description":"Service ID to calculate price for","format":"uuid","example":"550e8400-e29b-41d4-a716-446655440000"},"carId":{"type":"string","description":"Car ID to determine car type for pricing","format":"uuid","example":"550e8400-e29b-41d4-a716-446655440001"},"addOnsIds":{"description":"Array of add-on service IDs to include in total (optional)","example":["550e8400-e29b-41d4-a716-446655440002","550e8400-e29b-41d4-a716-446655440003"],"type":"array","items":{"type":"string"}}},"required":["serviceId","carId"]},"AssignTechnicianToPhaseDto":{"type":"object","properties":{"transactionId":{"type":"string","description":"Transaction ID"},"technicianIds":{"description":"Array of technician IDs to assign","type":"array","items":{"type":"string"}},"phase":{"type":"string","enum":["stageOne","stageTwo","stageThree"],"description":"Phase to assign technicians to"}},"required":["transactionId","technicianIds","phase"]},"TechnicianResponse":{"type":"object","properties":{"id":{"type":"string"},"fName":{"type":"string"},"lName":{"type":"string"},"status":{"type":"boolean"},"lastAction":{"type":"string"},"totalShiftTime":{"type":"string"},"totalBreakTime":{"type":"string"},"totalOvertimeTime":{"type":"string"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"}},"required":["id","fName","lName","status","totalShiftTime","totalBreakTime","totalOvertimeTime","createdAt","updatedAt"]},"AuditLogResponse":{"type":"object","properties":{"id":{"type":"string"},"technician":{"$ref":"#/components/schemas/TechnicianResponse"},"action":{"type":"string"},"timeStamp":{"format":"date-time","type":"string"}},"required":["id","technician","action","timeStamp"]},"AuditLogManyResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/AuditLogResponse"}},"skip":{"type":"number"},"take":{"type":"number"},"rows":{"type":"number"}},"required":["data","skip","take","rows"]},"CreateTechnicianDto":{"type":"object","properties":{"fName":{"type":"string","description":"Technician first name","example":"Ahmad","minLength":2,"maxLength":50},"lName":{"type":"string","description":"Technician last name","example":"Al-Mohammad","minLength":2,"maxLength":50}},"required":["fName","lName"]},"TechnicianManyResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/TechnicianResponse"}},"skip":{"type":"number"},"take":{"type":"number"},"rows":{"type":"number"}},"required":["data","skip","take","rows"]},"ServicePriceDto":{"type":"object","properties":{"carType":{"type":"string","enum":["Bike","Sedan","Crossover","SUV","VAN"]},"price":{"type":"number"},"posServiceId":{"type":"number"}},"required":["carType","price","posServiceId"]},"CreateServiceDto":{"type":"object","properties":{"name":{"type":"string"},"prices":{"type":"array","items":{"$ref":"#/components/schemas/ServicePriceDto"}}},"required":["name","prices"]},"CreateAddOnDto":{"type":"object","properties":{"name":{"type":"string"},"price":{"type":"number"},"posServiceId":{"type":"number"}},"required":["name","price","posServiceId"]},"AddOnsManyResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/AddOnsResponse"}},"skip":{"type":"number"},"take":{"type":"number"},"rows":{"type":"number"}},"required":["data","skip","take","rows"]},"CardStatsResponse":{"type":"object","properties":{"activeCustomers":{"type":"number"},"completedTransactions":{"type":"number"},"newCustomers":{"type":"number"},"scheduledTransactions":{"type":"number"},"inProgressTransaction":{"type":"number"}},"required":["activeCustomers","completedTransactions","newCustomers","scheduledTransactions","inProgressTransaction"]},"CompletionRatioResponse":{"type":"object","properties":{"completionRatio":{"type":"number"}},"required":["completionRatio"]},"ServiceRevenue":{"type":"object","properties":{"serviceId":{"type":"string"},"serviceName":{"type":"string"},"count":{"type":"number"},"totalRevenue":{"type":"number"}},"required":["serviceId","serviceName","count","totalRevenue"]},"AddOnRevenue":{"type":"object","properties":{"addOnId":{"type":"string"},"addOnName":{"type":"string"},"count":{"type":"number"},"totalRevenue":{"type":"number"}},"required":["addOnId","addOnName","count","totalRevenue"]},"RevenueSummary":{"type":"object","properties":{"totalRevenue":{"type":"number"},"serviceRevenue":{"type":"number"},"addOnRevenue":{"type":"number"},"services":{"type":"array","items":{"$ref":"#/components/schemas/ServiceRevenue"}},"addOns":{"type":"array","items":{"$ref":"#/components/schemas/AddOnRevenue"}}},"required":["totalRevenue","serviceRevenue","addOnRevenue","services","addOns"]},"TopCustomer":{"type":"object","properties":{"customerId":{"type":"string"},"customerName":{"type":"string"},"mobileNumber":{"type":"string"},"totalSpent":{"type":"number"},"transactionCount":{"type":"number"}},"required":["customerId","customerName","mobileNumber","totalSpent","transactionCount"]},"PeakHoursResponse":{"type":"object","properties":{"hour":{"type":"number"},"transactionCount":{"type":"number"},"percentage":{"type":"number"}},"required":["hour","transactionCount","percentage"]},"PeakDaysResponse":{"type":"object","properties":{"dayOfWeek":{"type":"number"},"dayName":{"type":"string"},"transactionCount":{"type":"number"},"percentage":{"type":"number"}},"required":["dayOfWeek","dayName","transactionCount","percentage"]},"PeakAnalysisResponse":{"type":"object","properties":{"peakHours":{"type":"array","items":{"$ref":"#/components/schemas/PeakHoursResponse"}},"peakDays":{"type":"array","items":{"$ref":"#/components/schemas/PeakDaysResponse"}}},"required":["peakHours","peakDays"]},"TechnicianUtilizationResponse":{"type":"object","properties":{"technicianId":{"type":"string"},"technicianName":{"type":"string"},"totalTransactions":{"type":"number"},"completedTransactions":{"type":"number"},"inProgressTransactions":{"type":"number"},"utilizationRate":{"type":"number"},"completionRate":{"type":"number"}},"required":["technicianId","technicianName","totalTransactions","completedTransactions","inProgressTransactions","utilizationRate","completionRate"]},"ServiceStageBottleneckResponse":{"type":"object","properties":{"stage":{"type":"string"},"averageTimeInStage":{"type":"number"},"transactionCount":{"type":"number"},"bottleneckScore":{"type":"number"}},"required":["stage","averageTimeInStage","transactionCount","bottleneckScore"]},"UserAddOnSalesResponse":{"type":"object","properties":{"userId":{"type":"string","description":"User ID or Sales Person ID"},"userName":{"type":"string","description":"User or Sales Person name"},"totalAddOnRevenue":{"type":"number","description":"Total revenue from add-on sales"},"addOnCount":{"type":"number","description":"Total count of add-ons sold"}},"required":["userId","userName","totalAddOnRevenue","addOnCount"]},"TechnicianShiftReport":{"type":"object","properties":{"technicianId":{"type":"string","description":"Technician ID"},"technicianName":{"type":"string","description":"Technician full name"},"shiftStartTime":{"type":"string","description":"Shift start time in HH:MM:SS format"},"shiftEndTime":{"type":"string","description":"Shift end time in HH:MM:SS format"},"totalShiftTime":{"type":"string","description":"Total shift time in HH:MM:SS format"},"totalBreakTime":{"type":"string","description":"Total break time in HH:MM:SS format"},"totalOvertimeTime":{"type":"string","description":"Total overtime in HH:MM:SS format"},"totalWorkingTime":{"type":"string","description":"Total working time (shift + overtime - break) in HH:MM:SS format"},"overtimeCompensation":{"type":"number","description":"Overtime compensation in dollars (overtime minutes * $0.025 per minute)"},"worked":{"type":"boolean","description":"Whether technician worked on this date"}},"required":["technicianId","technicianName","shiftStartTime","shiftEndTime","totalShiftTime","totalBreakTime","totalOvertimeTime","totalWorkingTime","overtimeCompensation","worked"]},"CashSummary":{"type":"object","properties":{"servicesCash":{"type":"number","description":"Total revenue from services"},"addOnsCash":{"type":"number","description":"Total revenue from add-ons"},"subscriptionCash":{"type":"number","description":"Total revenue from subscriptions"},"totalCash":{"type":"number","description":"Total cash (services + add-ons + subscriptions)"},"transactionCount":{"type":"number","description":"Number of completed transactions"}},"required":["servicesCash","addOnsCash","subscriptionCash","totalCash","transactionCount"]},"UserSalesReport":{"type":"object","properties":{"userId":{"type":"string","description":"User ID"},"userName":{"type":"string","description":"User full name"},"userRole":{"type":"string","description":"User role"},"services":{"type":"object","description":"Services sold","properties":{"count":{"type":"number"},"total":{"type":"number"}}},"addOns":{"type":"object","description":"Add-ons sold","properties":{"count":{"type":"number"},"total":{"type":"number"}}},"addOnCommission":{"type":"number","description":"Sales commission from add-ons (5% of total add-on sales)"}},"required":["userId","userName","userRole","services","addOns","addOnCommission"]},"DailyReportResponseDto":{"type":"object","properties":{"date":{"type":"string","description":"Report date"},"technicianShifts":{"description":"Technician shift information","type":"array","items":{"$ref":"#/components/schemas/TechnicianShiftReport"}},"cashSummary":{"description":"Cash summary for the day","allOf":[{"$ref":"#/components/schemas/CashSummary"}]},"userSales":{"description":"User sales for add-ons","type":"array","items":{"$ref":"#/components/schemas/UserSalesReport"}},"generatedAt":{"type":"string","description":"Report generation timestamp"}},"required":["date","technicianShifts","cashSummary","userSales","generatedAt"]},"CustomerVisitsResponse":{"type":"object","properties":{"customerId":{"type":"string","description":"Customer ID"},"visitCount":{"type":"number","description":"Number of completed visits for this customer"}},"required":["customerId","visitCount"]},"SubscriptionStatisticsResponse":{"type":"object","properties":{"totalSubscriptions":{"type":"number","description":"Total number of subscriptions purchased in the period"},"activeSubscriptions":{"type":"number","description":"Number of active subscriptions"},"activatedSubscriptions":{"type":"number","description":"Number of activated subscriptions"},"expiredSubscriptions":{"type":"number","description":"Number of expired subscriptions"},"pendingActivation":{"type":"number","description":"Number of subscriptions pending activation"}},"required":["totalSubscriptions","activeSubscriptions","activatedSubscriptions","expiredSubscriptions","pendingActivation"]},"DailySubscriptionRevenueResponse":{"type":"object","properties":{"date":{"type":"string","description":"Date in YYYY-MM-DD format","example":"2023-12-01"},"revenue":{"type":"number","description":"Total revenue from subscriptions on this date"}},"required":["date","revenue"]},"SubscriptionServicesUsageResponse":{"type":"object","properties":{"serviceId":{"type":"string","description":"Service ID"},"serviceName":{"type":"string","description":"Service name"},"totalAllocated":{"type":"number","description":"Total number of service allocations across all subscriptions"},"totalUsed":{"type":"number","description":"Total number of services used"},"totalUnused":{"type":"number","description":"Total number of unused services"},"subscriptionCount":{"type":"number","description":"Number of subscriptions including this service"}},"required":["serviceId","serviceName","totalAllocated","totalUsed","totalUnused","subscriptionCount"]},"NewCustomerResponse":{"type":"object","properties":{"id":{"type":"string","description":"Customer ID"},"fName":{"type":"string","description":"Customer first name"},"lName":{"type":"string","description":"Customer last name"},"mobileNumber":{"type":"string","description":"Customer mobile number"},"createdAt":{"format":"date-time","type":"string","description":"Date when customer was created"}},"required":["id","fName","lName","mobileNumber","createdAt"]},"ServiceCarTypeRevenueResponse":{"type":"object","properties":{"serviceId":{"type":"string","description":"Service ID"},"serviceName":{"type":"string","description":"Service name"},"carType":{"type":"string","description":"Car type"},"completedCount":{"type":"number","description":"Total completed transactions for this service-carType combination"},"totalRevenue":{"type":"number","description":"Total revenue generated from this service-carType combination"}},"required":["serviceId","serviceName","carType","completedCount","totalRevenue"]},"SignupDto":{"type":"object","properties":{"name":{"type":"string","description":"Full name of the user","example":"Ahmad Al-Mohammad","minLength":2,"maxLength":100},"mobileNumber":{"type":"string","description":"Jordanian mobile number (must start with 07)","example":"0791234567","pattern":"^07[789]\\d{7}$"},"password":{"type":"string","description":"Password for the account (minimum 6 characters)","example":"securePassword123","minLength":6},"role":{"type":"string","description":"Role of the user in the system","enum":["ADMIN","SUPERVISOR"],"example":"SUPERVISOR"}},"required":["name","mobileNumber","password","role"]},"SigninDto":{"type":"object","properties":{"mobileNumber":{"type":"string","description":"Jordanian mobile number used for authentication","example":"0791234567","pattern":"^07[789]\\d{7}$"},"password":{"type":"string","description":"User password (minimum 6 characters)","example":"securePassword123","minLength":6}},"required":["mobileNumber","password"]},"DeleteUserDto":{"type":"object","properties":{"mobileNumber":{"type":"string","description":"Jordanian mobile number used for authentication","example":"0791234567","pattern":"^07[789]\\d{7}$"}},"required":["mobileNumber"]},"ResetPasswordDto":{"type":"object","properties":{"mobileNumber":{"type":"string","description":"Jordanian mobile number of the user whose password to reset","example":"0791234567","pattern":"^07[789]\\d{7}$"},"newPassword":{"type":"string","description":"New password for the account (minimum 6 characters)","example":"newSecurePassword123","minLength":6}},"required":["mobileNumber","newPassword"]},"UpdateUserDto":{"type":"object","properties":{"userId":{"type":"string","description":"ID of the user to update","example":"123e4567-e89b-12d3-a456-426614174000"},"name":{"type":"string","description":"Full name of the user","example":"Ahmad Al-Mohammad","minLength":2,"maxLength":100},"mobileNumber":{"type":"string","description":"Jordanian mobile number (must start with 07)","example":"0791234567","pattern":"^07[789]\\d{7}$"}},"required":["userId"]},"CreateSalesDto":{"type":"object","properties":{"firstName":{"type":"string","description":"First name of the sales person"},"lastName":{"type":"string","description":"Last name of the sales person"},"mobileNumber":{"type":"string","description":"Mobile number of the sales person"},"isActive":{"type":"boolean","description":"Is the sales person active","default":true}},"required":["firstName","lastName"]},"SalesResponse":{"type":"object","properties":{"id":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"mobileNumber":{"type":"string"},"isActive":{"type":"boolean"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"}},"required":["id","firstName","lastName","isActive","createdAt","updatedAt"]},"SalesManyResponse":{"type":"object","properties":{"rows":{"type":"number"},"skip":{"type":"number"},"take":{"type":"number"},"data":{"type":"array","items":{"$ref":"#/components/schemas/SalesResponse"}}},"required":["rows","skip","take","data"]},"UpdateSalesDto":{"type":"object","properties":{"id":{"type":"string","description":"Sales person ID"},"firstName":{"type":"string","description":"First name of the sales person"},"lastName":{"type":"string","description":"Last name of the sales person"},"mobileNumber":{"type":"string","description":"Mobile number of the sales person"},"isActive":{"type":"boolean","description":"Is the sales person active"}},"required":["id"]},"SubscriptionServiceDto":{"type":"object","properties":{"serviceId":{"type":"string","description":"Service ID"},"usageCount":{"type":"number","description":"Number of times this service can be used"}},"required":["serviceId","usageCount"]},"SubscriptionPriceDto":{"type":"object","properties":{"carType":{"type":"string","enum":["Bike","Sedan","Crossover","SUV","VAN"],"description":"Car type for pricing"},"price":{"type":"number","description":"Price for this car type"},"posServiceId":{"type":"number","description":"POS service ID for this car type"}},"required":["carType","price","posServiceId"]},"CreateSubscriptionDto":{"type":"object","properties":{"name":{"type":"string","description":"Subscription name"},"description":{"type":"string","description":"Subscription description"},"endDate":{"type":"string","description":"Subscription end date (optional)"},"maxUsesPerService":{"type":"number","description":"Maximum uses per service (optional)"},"services":{"description":"Services included in subscription","type":"array","items":{"$ref":"#/components/schemas/SubscriptionServiceDto"}},"prices":{"description":"Pricing per car type","type":"array","items":{"$ref":"#/components/schemas/SubscriptionPriceDto"}}},"required":["name","services","prices"]},"SubscriptionServiceResponseDto":{"type":"object","properties":{"id":{"type":"string"},"serviceId":{"type":"string"},"serviceName":{"type":"string"},"usageCount":{"type":"number"}},"required":["id","serviceId","serviceName","usageCount"]},"SubscriptionPriceResponseDto":{"type":"object","properties":{"carType":{"type":"string","enum":["Bike","Sedan","Crossover","SUV","VAN"]},"price":{"type":"number"},"posServiceId":{"type":"number"}},"required":["carType","price","posServiceId"]},"SubscriptionResponseDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"description":{"type":"string"},"endDate":{"format":"date-time","type":"string"},"maxUsesPerService":{"type":"number"},"isActive":{"type":"boolean"},"services":{"type":"array","items":{"$ref":"#/components/schemas/SubscriptionServiceResponseDto"}},"prices":{"type":"array","items":{"$ref":"#/components/schemas/SubscriptionPriceResponseDto"}},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"}},"required":["id","name","isActive","services","prices","createdAt","updatedAt"]},"PurchaseSubscriptionDto":{"type":"object","properties":{"customerId":{"type":"string","description":"Customer ID"},"carId":{"type":"string","description":"Car ID"},"subscriptionId":{"type":"string","description":"Subscription ID"}},"required":["customerId","carId","subscriptionId"]},"ActivateSubscriptionDto":{"type":"object","properties":{"customerSubscriptionId":{"type":"string","description":"Customer Subscription ID"},"qrCodeId":{"type":"string","description":"QR Code ID to activate"}},"required":["customerSubscriptionId","qrCodeId"]},"AssignQRCodeDto":{"type":"object","properties":{"customerSubscriptionId":{"type":"string","description":"Customer subscription ID"},"qrCodeId":{"type":"string","description":"QR Code ID"}},"required":["customerSubscriptionId","qrCodeId"]},"CustomerInfoDto":{"type":"object","properties":{"id":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"fullName":{"type":"string"},"mobileNumber":{"type":"string"},"isActive":{"type":"boolean"},"isBlacklisted":{"type":"boolean"}},"required":["id","firstName","lastName","fullName","mobileNumber","isActive","isBlacklisted"]},"SubscriptionBasicInfoDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"description":{"type":"string"}},"required":["id","name"]},"CarBrandDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"}},"required":["id","name"]},"CarModelDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"type":{"type":"string","enum":["Bike","Sedan","Crossover","SUV","VAN"]}},"required":["id","name","type"]},"CarInfoDto":{"type":"object","properties":{"id":{"type":"string"},"plateNumber":{"type":"string"},"brand":{"$ref":"#/components/schemas/CarBrandDto"},"model":{"$ref":"#/components/schemas/CarModelDto"},"year":{"type":"number"},"color":{"type":"string"}},"required":["id","plateNumber","brand","model"]},"RemainingServiceDto":{"type":"object","properties":{"serviceId":{"type":"string"},"serviceName":{"type":"string"},"remainingCount":{"type":"number"},"totalCount":{"type":"number"},"usedCount":{"type":"number"},"lastUsed":{"format":"date-time","type":"string"}},"required":["serviceId","serviceName","remainingCount","totalCount","usedCount"]},"SubscriptionStatusDto":{"type":"object","properties":{"isActive":{"type":"boolean"},"isActivated":{"type":"boolean"},"isExpired":{"type":"boolean"},"canUseServices":{"type":"boolean"}},"required":["isActive","isActivated","isExpired","canUseServices"]},"SubscriptionPricingDto":{"type":"object","properties":{"totalPrice":{"type":"number"}},"required":["totalPrice"]},"SubscriptionDatesDto":{"type":"object","properties":{"purchaseDate":{"format":"date-time","type":"string"},"activationDate":{"format":"date-time","type":"string"},"expiryDate":{"format":"date-time","type":"string"},"daysUntilExpiry":{"type":"number"}},"required":["purchaseDate"]},"AllCustomerSubscriptionsResponseDto":{"type":"object","properties":{"id":{"type":"string"},"qrCode":{"type":"string"},"isActivated":{"type":"boolean"},"customer":{"$ref":"#/components/schemas/CustomerInfoDto"},"subscription":{"$ref":"#/components/schemas/SubscriptionBasicInfoDto"},"car":{"$ref":"#/components/schemas/CarInfoDto"},"remainingServices":{"type":"array","items":{"$ref":"#/components/schemas/RemainingServiceDto"}},"totalServicesRemaining":{"type":"number"},"status":{"$ref":"#/components/schemas/SubscriptionStatusDto"},"pricing":{"$ref":"#/components/schemas/SubscriptionPricingDto"},"dates":{"$ref":"#/components/schemas/SubscriptionDatesDto"}},"required":["id","isActivated","customer","subscription","car","remainingServices","totalServicesRemaining","status","pricing","dates"]},"CustomerSubscriptionResponseDto":{"type":"object","properties":{"id":{"type":"string"},"customerId":{"type":"string"},"carId":{"type":"string"},"subscriptionId":{"type":"string"},"qrCodeId":{"type":"string"},"qrCode":{"type":"string"},"isActive":{"type":"boolean"},"purchaseDate":{"format":"date-time","type":"string"},"activationDate":{"format":"date-time","type":"string"},"expiryDate":{"format":"date-time","type":"string"},"totalPrice":{"type":"number"},"subscription":{"$ref":"#/components/schemas/SubscriptionResponseDto"},"remainingServices":{"type":"array","items":{"type":"string"}}},"required":["id","customerId","carId","subscriptionId","qrCodeId","qrCode","isActive","purchaseDate","totalPrice","subscription","remainingServices"]},"UseServiceDto":{"type":"object","properties":{"qrCode":{"type":"string","description":"QR Code to scan"},"serviceId":{"type":"string","description":"Service ID to use"},"usedById":{"type":"string","description":"User ID who is performing the service"},"notes":{"type":"string","description":"Notes about the service usage"}},"required":["qrCode","serviceId"]},"UpdateSubscriptionDto":{"type":"object","properties":{"name":{"type":"string","description":"Subscription name"},"description":{"type":"string","description":"Subscription description"},"endDate":{"type":"string","description":"Subscription end date (optional)"},"maxUsesPerService":{"type":"number","description":"Maximum uses per service (optional)"},"services":{"description":"Services included in subscription","type":"array","items":{"$ref":"#/components/schemas/SubscriptionServiceDto"}},"prices":{"description":"Pricing per car type","type":"array","items":{"$ref":"#/components/schemas/SubscriptionPriceDto"}}},"required":["name","services","prices"]},"CreateDailyNoteDto":{"type":"object","properties":{"note":{"type":"string","description":"The content of the daily note","example":"Today we completed maintenance on the main washing equipment and serviced 15 vehicles. The new technician is adapting well to our processes."},"imageIds":{"description":"Array of image IDs to attach to this note","example":["550e8400-e29b-41d4-a716-446655440000","550e8400-e29b-41d4-a716-446655440001"],"type":"array","items":{"type":"string"}}},"required":["note"]},"DailyNoteResponse":{"type":"object","properties":{"id":{"type":"string","description":"Unique identifier for the daily note","example":"550e8400-e29b-41d4-a716-446655440000"},"note":{"type":"string","description":"The content of the daily note","example":"Today we completed maintenance on the main washing equipment and serviced 15 vehicles."},"createdById":{"type":"string","description":"ID of the user who created this note","example":"550e8400-e29b-41d4-a716-446655440001"},"createdBy":{"description":"Information about the user who created this note","allOf":[{"$ref":"#/components/schemas/UserInfoResponse"}]},"isActive":{"type":"boolean","description":"Whether the note is active (soft delete)","example":true},"createdAt":{"format":"date-time","type":"string","description":"Date and time when the note was created","example":"2024-03-15T10:30:00.000Z"},"updatedAt":{"format":"date-time","type":"string","description":"Date and time when the note was last updated","example":"2024-03-15T10:30:00.000Z"},"images":{"description":"Images attached to this daily note","type":"array","items":{"$ref":"#/components/schemas/ImageResponse"}}},"required":["id","note","createdById","createdBy","isActive","createdAt","updatedAt","images"]},"DailyNotesListResponse":{"type":"object","properties":{"data":{"description":"List of daily notes","type":"array","items":{"$ref":"#/components/schemas/DailyNoteResponse"}},"total":{"type":"number","description":"Total number of notes matching the filter","example":25},"limit":{"type":"number","description":"Number of notes per page","example":10},"page":{"type":"number","description":"Current page number","example":1}},"required":["data","total","limit","page"]},"UpdateDailyNoteDto":{"type":"object","properties":{"note":{"type":"string","description":"The content of the daily note","example":"Today we completed maintenance on the main washing equipment and serviced 15 vehicles. The new technician is adapting well to our processes."},"imageIds":{"description":"Array of image IDs to attach to this note","example":["550e8400-e29b-41d4-a716-446655440000","550e8400-e29b-41d4-a716-446655440001"],"type":"array","items":{"type":"string"}}}},"CreateReservationDto":{"type":"object","properties":{"customerId":{"type":"string","description":"Customer ID","format":"uuid","example":"550e8400-e29b-41d4-a716-446655440000"},"datetime":{"type":"string","description":"Reservation date and time","example":"2025-10-18T10:00:00.000Z"},"notes":{"type":"string","description":"Additional notes for the reservation","example":"Customer prefers morning slot"}},"required":["customerId","datetime"]},"ReservationResponseDto":{"type":"object","properties":{"id":{"type":"string","example":"550e8400-e29b-41d4-a716-446655440000"},"customer":{"type":"object","example":{"id":"550e8400-e29b-41d4-a716-446655440001","firstName":"John","lastName":"Doe","fullName":"John Doe","mobileNumber":"0791234567"}},"datetime":{"format":"date-time","type":"string","example":"2025-10-18T10:00:00.000Z"},"notes":{"type":"string","example":"Customer prefers morning slot"},"markAsDone":{"type":"boolean","example":false},"isActive":{"type":"boolean","example":true},"createdAt":{"format":"date-time","type":"string","example":"2025-10-17T08:00:00.000Z"},"updatedAt":{"format":"date-time","type":"string","example":"2025-10-17T08:00:00.000Z"}},"required":["id","customer","datetime","markAsDone","isActive","createdAt","updatedAt"]},"UpdateReservationDto":{"type":"object","properties":{"datetime":{"type":"string","description":"Reservation date and time","example":"2025-10-18T10:00:00.000Z"},"notes":{"type":"string","description":"Additional notes for the reservation","example":"Customer prefers morning slot"},"markAsDone":{"type":"boolean","description":"Mark reservation as done","example":true}}}}}}